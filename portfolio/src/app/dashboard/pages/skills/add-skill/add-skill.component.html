<div class="home-dashboard">
  <div class="settings-card">
    <header class="page-header">
      <h1>Skills Dashboard</h1>
      <p>Manage your skills and categories</p>
    </header>

    <form [formGroup]="skillsForm" (ngSubmit)="onSubmit()" class="settings-form" novalidate>
      <div class="form-layout">
        <div class="form-fields">

          <div class="form-group">
            <label class="form-label required">Category</label>
            <input type="text" formControlName="category" class="form-input"
              [ngClass]="{'error-border': skillsForm.get('category')?.invalid && (skillsForm.get('category')?.touched || isSubmitted)}"
              placeholder="e.g. Programming Languages">
            <div *ngIf="skillsForm.get('category')?.invalid && (skillsForm.get('category')?.touched || isSubmitted)">
              <span class="error-message" *ngIf="skillsForm.get('category')?.errors?.['required']">Category is required</span>
              <span class="error-message" *ngIf="skillsForm.get('category')?.errors?.['minlength']">Minimum 2 characters</span>
            </div>
          </div>

          <div formArrayName="skill">
            <div *ngFor="let skill of skills; let i = index" [formGroupName]="i" class="skill-item">

              <div class="form-group">
                <label class="form-label required">Skill Name</label>
                <input type="text" formControlName="name" class="form-input"
                  [ngClass]="{'error-border': skill.get('name')?.invalid && (skill.get('name')?.touched || isSubmitted)}"
                  placeholder="e.g. JavaScript">
                <div *ngIf="skill.get('name')?.invalid && (skill.get('name')?.touched || isSubmitted)">
                  <span class="error-message" *ngIf="skill.get('name')?.errors?.['required']">Name is required</span>
                  <span class="error-message" *ngIf="skill.get('name')?.errors?.['minlength']">Minimum 2 characters</span>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label required">Image URL</label>
                <input type="text" formControlName="img" class="form-input"
                  [ngClass]="{'error-border': skill.get('img')?.invalid && (skill.get('img')?.touched || isSubmitted)}"
                  placeholder="Paste image link">
                <div *ngIf="skill.get('img')?.invalid && (skill.get('img')?.touched || isSubmitted)">
                  <span class="error-message" *ngIf="skill.get('img')?.errors?.['required']">Image URL is required</span>
                </div>
              </div>

              <button type="button" class="btn btn-secondary" (click)="removeSkill(i)" *ngIf="skills.length > 1">
                Remove Skill
              </button>
            </div>
          </div>

          <button type="button" class="btn btn-secondary" (click)="addSkill()">
            + Add New Skill
          </button>


          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i> Save Changes
            </button>
          </div>

        </div>
      </div>
    </form>
  </div>
</div>


<div class="form-actions" routerLink="/dashboard/skills-dashboard">
    <button type="submit" class="btn btn-primary"><i class="fa-solid fa-arrow-left"></i> Back</button>
</div>
